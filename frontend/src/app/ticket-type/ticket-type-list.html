<div class="ticket-types-page">
  <div class="page-header">
    <h2>{{ 'TICKET_TYPES.TITLE' | translate }}</h2>
  </div>

  @if (loading) {
    <div class="alert alert-info">{{ 'TICKET_TYPES.LOADING' | translate }}</div>
  }

  @if (errorKey) {
    <div class="alert alert-danger">{{ errorKey | translate:errorArgs }}</div>
    @if (validationMessages.length) {
      <ul class="mt-2 mb-0">
        @for (m of validationMessages; track m) {
          <li>{{ m }}</li>
        }
      </ul>
    }
  }

  @if (!loading && items.length) {
    <div class="cards-container">
      @for (tt of items; track tt.id) {
        <div class="ticket-card">
          @if (getImageUrl(tt.photoUrl)) {
            <img class="ticket-image" [src]="getImageUrl(tt.photoUrl)!" [alt]="tt.typeName" />
          }

          <div class="ticket-content">
            <h3>{{ tt.typeName }}</h3>
            <p class="ticket-cost">{{ 'Cost:' | translate }} {{ currency.convertFromEur(tt.cost) | number:'1.2-2' }} {{ currency.getCurrencySymbol() }}</p>
            <p class="ticket-desc" title="{{ tt.description }}">{{ tt.description }}</p>

            @if (isAdmin) {
              <div class="ticket-buttons">
                <a class="btn-edit" [routerLink]="['/ticket-types', tt.id]">
                  {{ 'TICKET_TYPES.EDIT' | translate }}
                </a>
                @if (tt.id !== undefined) {
                  <button
                    class="btn-delete"
                    (click)="delete(tt.id!)">
                    {{ 'TICKET_TYPE_FORM.BUTTON_DELETE' | translate }}
                  </button>
                }

              </div>
            }
          </div>
        </div>
      }
    </div>
  } @else if (!loading && !(items.length)) {
    <div class="text-muted">{{ 'TICKET_TYPES.EMPTY' | translate }}</div>
  }
  @if (isAdmin) {
    <div class="add-container">
      <a class="btn-add" [routerLink]="['/ticket-types/new']">{{ 'TICKET_TYPES.CREATE' | translate }}</a>
    </div>
  }
</div>
